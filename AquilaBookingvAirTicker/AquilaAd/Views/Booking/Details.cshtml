@model ShareHolderCore.Domain.Model.Booking
@{
    ViewBag.Title = "Xem đặt phòng";
}
<link href="../../Content/jquery-ui.css" rel="stylesheet" type="text/css" />
    <script src="../../Scripts/jquery-ui-1.8.20.min.js" type="text/javascript"></script> @*load date time picker*@

<div id="content">

            <h2><span>Property : Property List</span></h2>

            <!-- tab -->
            <ul id="tab">
                <li><a href="#" title="Property 100 (rows)">Property 100 (rows)</a></li>
                <li class="Active">
                    <span>New property</span>
                    <a href="#" title="Close" class="Close">Close</a>
                </li>
            </ul>
            <!-- tab.end -->

            <!-- panel -->
            <div class="Panel">

                <!-- functions -->
                <ul class="Functions">
                   @* <li><a href="#" id="submit_link">Save</a>*@
                    @*<li>@Html.ActionLink("Save", "Save", "Home", new { actionpage = "Save", idhotel = "" }, null)</li>*@
                    @*<li>@Html.ActionLink("Save & New", "Save", "Home", new { actionpage = "SaveNew", idhotel = "" }, null)</li>*@
                    <li>@Html.ActionLink("Thoát", "Cancel", "Booking")</li>
                    <li>
                        <span>Actions</span>
                        <ul>
                            <li><a href="#" title="Approve property">Approve property</a></li>
                            <li><a href="#" title="View facilities">View facilities</a></li>
                            <li>
                                <span>Translation</span>
                                <ul>
                                    <li><a href="#" title="Tiếng Việt">Tiếng Việt</a></li>
                                    <li><a href="#" title="French">French</a></li>
                                </ul>
                            </li>
                        </ul>
                    </li>
                </ul>
                <!-- functions.end -->

            </div>
            <!-- panel.end -->

            <!-- subtab -->
            <ul id="subtab">
                <li class="Active"><span>General Info</span></li>
                <li><a href="#" title="Detail Info">Detail Info</a></li>
            </ul>
            <!-- subtab.end -->

            <!-- mainContent -->
            
            <div id="mainContent">
             @using (Html.BeginForm("Edit", "Availability", FormMethod.Post, new { id = "Submitform" }))
             {
                 @Html.ValidationSummary()
                <fieldset>
                 <div>                     
                     <input type="hidden" value="@Model.BookingId" id="GetBookingId" name="GetBookingId" />  
                    </div>
                    <div class="Input">
                        <label for="unit">Ngày đặt phòng:</label>
                       
                        @Html.TextBoxFor(m => m.BookingDate, new { id = "txtFromDate", name = "txtFromDate", @class = "Medium" })
                    </div>
                  <div class="Input">
                        <label for="unit">Thành viên:</label>
                       
                         @Html.TextBoxFor(m => m.Membership.MemberName, new { id = "m.Price", @class = "Medium" })
                    </div>
                     <div class="Input">
                        <label for="price">Tên khách hàng:</label>
                        
                        @Html.TextBoxFor(m => m.FullName, new { id = "m.Price", @class = "Medium" })
                        
                    </div>
                      <div class="Input">
                        <label for="price">Email:</label>
                        
                        @Html.TextBoxFor(m => m.Email, new { id = "m.Price", @class = "Medium" })
                        
                    </div>
                      <div class="Input">
                        <label for="price">Số điện thoại:</label>
                        @Html.TextBoxFor(m => m.PhoneNumber, new { id = "m.Price", @class = "Medium" })
                    </div>
                    <div class="Input">
                        <label for="currency">Ngày đến:</label>
                        @Html.TextBoxFor(m => m.ArrivalDate, new { id = "m.Price", @class = "Medium" })
                        
                    </div>
                    <div class="Input">
                        <label for="price">Thời gian đến:</label>
                        
                         @Html.TextBoxFor(m => m.ArrivalTime, new { id = "m.Price", @class = "Medium" })
                    </div>
                         <div class="Input">
                        <label for="IsHotDeal">Ghi chú:</label>
                        @Html.TextBoxFor(m => m.Remark, new { id = "m.Price", @class = "Medium" })
                    </div>
                        <div class="Input">
                        <label for="price">Mã đăng ký:</label>
                        
                         @Html.TextBoxFor(m => m.ViewCode, new { id = "m.Price", @class = "Medium" })
                    </div>
                         <div class="Input">
                        <label for="IsHotDeal">Địa chỉ IP:</label>
                        @Html.TextBoxFor(m => m.IpAddress, new { id = "m.Price", @class = "Medium" })
                    </div>
                    <div class="Input">
                        <label for="price">Ngày tạo:</label>
                        <input type="date" id="CreatedDate" name="CreatedDate" class="Medium" value='@AquilaAd.Ext.CustomHelpers.parstFormatToYYYY_MM_DD(Model.CreatedDate)' />
                        
                    </div>
                    <div class="Input">
                        <label for="code">Người tạo:</label>                        
                         @Html.TextBoxFor(m => m.CreatedBy, new { id = "CreatedBy", name = "CreatedBy", @class = "Medium" })
                    </div>
                    
                      <div class="Table">
                        <table cellpadding="0" cellspacing="0">
                            <thead>
                                <tr>
                                  <th>Ngày đến</th>
                                  <th>Ngày đi</th>
                                  <th>Tên KS</th>
                                  <th>Loại phòng</th>
                                  <th>Số lượng</th>                                 
                                  <th>Giá</th>
                                  <th>Tổng</th>
                                </tr>
                            </thead>
                            <tbody>
                            @foreach (var item in (IList<ShareHolderCore.Domain.Model.BookingDetail>)ViewData["ListBookingDetail"])
                            {                                
                               <tr>
                                     <td>@AquilaAd.Ext.CustomHelpers.parstFormatTo_DD_MM_YYYY(@item.FromDate)</td>
                                    <td>@AquilaAd.Ext.CustomHelpers.parstFormatTo_DD_MM_YYYY(@item.ToDate)</td>
                                    <td>@AquilaAd.Ext.CustomHelpers.getNameHotel(@item.HotelId)</td>                                                                                                  
                                    <td>@item.RoomType.Name</td>
                                    <td> @item.Quantity</td>
                                    <td>@string.Format("{0,0:N0}", @item.Price)</td>
                                    <td>@string.Format("{0,0:N0}",  @item.Remark)</td>                                 
                                </tr>
                            }                                
                            </tbody>
                        </table>
                    </div>
                </fieldset>                 
             }
                
            </div>
            <!-- mainContent.end -->

            <!-- panel -->
            <div class="Panel">

                <!-- functions -->
                <ul class="Functions">
                    <li>@Html.ActionLink("Thoát", "Cancel", "Booking")</li>
                    <li>
                        <span>Actions</span>
                        <ul>
                            <li><a href="#" title="Approve property">Approve property</a></li>
                            <li><a href="#" title="View facilities">View facilities</a></li>
                            <li>
                                <span>Translation</span>
                                <ul>
                                    <li><a href="#" title="Tiếng Việt">Tiếng Việt</a></li>
                                    <li><a href="#" title="French">French</a></li>
                                </ul>
                            </li>
                        </ul>
                    </li>
                </ul>
                <!-- functions.end -->

            </div>
            <!-- panel.end -->

        </div>
<script type="text/javascript">
    $(function () {
        $('a#submit_link').click(function () {
            $('form#Submitform').submit();
        });
    });
</script>
 <script type="text/javascript">
     $().ready(function () {
         $('#txtFromDate').datepicker({
             dateFormat: 'dd/mm/yy',
             buttonImage: '@Url.Content("~/Content/themes/calendar.gif")',
             buttonImageOnly: true,
             showOn: 'both',
             minDate: "0"


         });
     });
     $().ready(function () {

         $('#txtToDate').datepicker({
             dateFormat: 'dd/mm/yy',
             buttonImage: '@Url.Content("~/Content/themes/calendar.gif")',
             buttonImageOnly: true,
             showOn: 'both',
             minDate: "0"
         });
     });
                 
    </script>
      <script type="text/javascript">
          $().ready(function () {
              if ($("#txtFromDate").val() != '' || $("#txtToDate").val() != '') {
                  var fromdate = $('#txtFromDate').datepicker("getDate").valueOf();
                  var todate = $('#txtToDate').datepicker("getDate").valueOf();
                  var resual = (todate - fromdate) / 86400000;
                  $('#valueTotalDate').text(resual);
              }
              $('#txtToDate').change(function () {
                  var strLoadingText = "<%= Resources.Reource.About %>";
                  if ($("#txtFromDate").val() != '') {
                      var fromdate = $('#txtFromDate').datepicker("getDate").valueOf();
                      var todate = $('#txtToDate').datepicker("getDate").valueOf();
                      var resual = (todate - fromdate) / 86400000;
                      if (resual < 0) {
                          // alert("Ngày về phải lớn hơn ngày đi ");
                          alert(strLoadingText);
                          $('#txtToDate').datepicker("setDate", $('#txtFromDate').datepicker("getDate"))
                          $('#valueTotalDate').text(0);
                      }
                      else {
                          $('#valueTotalDate').text(resual);
                      }
                  }
              });
              $('#txtFromDate').change(function () {
                  var strLoadingText = "<%= Resources.Reource.About %>";
                  if ($("#txtToDate").val() != '') {
                      var fromdate = $('#txtFromDate').datepicker("getDate").valueOf();
                      var todate = $('#txtToDate').datepicker("getDate").valueOf();
                      var resual = (todate - fromdate) / 86400000;
                      if (resual < 0) {
                          //alert("Ngày về phải lớn hơn ngày đi");
                          alert(strLoadingText)
                          $('#txtToDate').datepicker("setDate", $('#txtFromDate').datepicker("getDate"))
                          $('#valueTotalDate').text(0);
                      }
                      else {
                          $('#valueTotalDate').text(resual);
                      }
                  }
              });
          });
               
                 
                </script>